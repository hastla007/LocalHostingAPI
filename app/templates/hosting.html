{% extends "base.html" %}
{% block content %}
  <section class="card">
    <h2>Uploaded Files</h2>
    {% if files %}
      <table class="file-table">
        <thead>
          <tr>
            <th>Name</th>
            <th>Size</th>
            <th>Uploaded</th>
            <th>Expires</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          {% for file in files %}
            <tr>
              <td>{{ file.original_name }}</td>
              <td>{{ file.size|human_filesize }}</td>
              <td>{{ file.uploaded_at|human_datetime }}</td>
              <td>{{ file.expires_at|human_datetime }}</td>
              <td>
                <a href="{{ file.download_url }}" class="button">Download</a>
                <form method="post" action="{{ url_for('hosting_delete', file_id=file.id) }}" class="inline-form" onsubmit="return confirm('Delete this file?');">
                  <button type="submit" class="button danger">Delete</button>
                </form>
              </td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    {% else %}
      <p>No files have been uploaded yet.</p>
    {% endif %}
  </section>

  <section class="card">
    <h2>API Usage</h2>
    <p>Upload files via the <code>/fileupload</code> endpoint:</p>
    <pre><code>curl -F "file=@/path/to/your/file" {{ request.url_root.rstrip('/') }}/fileupload</code></pre>
    <p>The current retention policy keeps files for <strong>{{ config.retention_hours }}</strong> hours.</p>
  </section>
{% endblock %}
