{% extends "base.html" %}
{% block content %}
  <section class="card">
    <h2>Uploaded Files</h2>
    {% if files %}
      <table class="file-table">
        <thead>
          <tr>
            <th>Name</th>
            <th>Size</th>
            <th>Uploaded</th>
            <th>Expires</th>
            <th>Time Remaining</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          {% for file in files %}
            <tr>
              <td>{{ file.original_name }}</td>
              <td>{{ file.size|human_filesize }}</td>
              <td>{{ file.uploaded_at|human_datetime }}</td>
              <td>{{ file.expires_at|human_datetime }}</td>
              <td class="time-remaining">{{ file.remaining_seconds|human_timedelta }}</td>
              <td class="actions-cell">
                <a
                  href="{{ file.download_url }}"
                  class="button icon-only"
                  title="Download file"
                  aria-label="Download file"
                >
                  <span class="icon" aria-hidden="true">⬇️</span>
                </a>
                <a
                  href="{{ file.direct_download_url }}"
                  class="button secondary icon-only"
                  title="Open direct link"
                  aria-label="Open direct link"
                  target="_blank"
                  rel="noopener noreferrer"
                >
                  <span class="icon" aria-hidden="true">🔗</span>
                </a>
                {% if file.raw_download_url %}
                  <a
                    href="{{ file.raw_download_url }}"
                    class="button secondary icon-only"
                    title="Open raw URL"
                    aria-label="Open raw URL"
                    target="_blank"
                    rel="noopener noreferrer"
                  >
                    <span class="icon" aria-hidden="true">🌐</span>
                  </a>
                {% endif %}
                <form method="post" action="{{ url_for('hosting_delete', file_id=file.id) }}" class="inline-form" onsubmit="return confirm('Delete this file?');">
                  <button
                    type="submit"
                    class="button danger icon-only"
                    title="Delete file"
                    aria-label="Delete file"
                  >
                    <span class="icon" aria-hidden="true">🗑️</span>
                  </button>
                </form>
              </td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    {% else %}
      <p>No files have been uploaded yet.</p>
    {% endif %}
  </section>
{% endblock %}
